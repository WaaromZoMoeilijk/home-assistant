platform: template
sensors:
  lights_count:
    friendly_name: "Number of Lights"
    value_template: >
      {%- set domains = ['light'] -%}
      {%- for domain in domains -%}
        {%- for item in states[domain] -%}
          {% if loop.first %}
            {{loop.length}}
          {% endif %}
        {%- endfor -%}
      {%- endfor -%}
